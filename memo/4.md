# テキストエリア編集でブロック編集する方法案

A. Textarea内で３つ以上の連続改行を禁止する
B. Textarea内では３つ以上の連続改行を許可しつつ、ブロック生成字には３つ以上の連続改行を２改行に修正する
C. Textarea内で３つ以上の連続改行があるとブロック生成しない

## 問題点

A. ブロックの改行だけを残してブロック内テキストをすべて消すと、３つ以上の連続改行ができてしまう
B. text.replace(/[\n]{3,}/g, '\n\n')で置換するが、カーソル位置がずれてしまう
C. エラー表示する必要がある（エラー有無、エラー内容、エラー箇所、エラー改善方法を表示すべき。Textareaでは難しい）

　Cは最悪タイトルバーに「n行目の連続改行を２つ以下にしてください」などと書けばいい。と思ったが全画面表示のとき見えなくなるので、HTMLプレビューの所にエラー表示すべき。

### エラー表示

ID|方法|問題点
--|----|------
A|タイトルバーに表示する|全画面表示のとき見えなくなる。エラー発生時に気づきにくい
B|HTMLプレビュー画面にオーバーラップして表示する|修正されるまでHTMLプレビューが見えなくなる。行数を文字で示すが、テキストエリア内のどこかが判りにくい（エラーメッセージにフォーカスしてENTERキー押下するとtextareaの該当箇所にカーソルが飛ぶようにすれば改善可能。あるいは「２連続改行に変更する」ボタンも表示する。つまり「該当箇所に飛ぶ」「該当箇所を自動修正する」の２つの方法を提案する）
C|Textareaの該当行背景色を赤にする|textareaにそんな機能はないため実装不可（Aceなどのライブラリが必要）

# ErrorViewer

```
Nつのエラーがあります。すべて修正するまでプレビューできません。

[可能な限り自動修正する] n/N

1. エラー要約▼（展開すると詳細表示）[自動修正する]▼（自動修正内容詳細）[該当箇所へ飛ぶ] N行目
2. エラー要約▼（展開すると詳細表示）[自動修正する]▼（自動修正内容詳細）[該当箇所へ飛ぶ] N行目
3. エラー要約▼（展開すると詳細表示）[自動修正する]▼（自動修正内容詳細）[該当箇所へ飛ぶ] N行目
...

```

```
Nつのエラーがあります。すべて修正するまでプレビューできません。

[可能な限り自動修正する] n/N

箇所|修正提案|エラー要約
----|--------|----------
N行目|こうする|エラー要約
N行目|こうする|エラー要約
N行目|こうする|エラー要約
```

　フォーカスは`[可能な限り自動修正する]`, `こうする`, `エラー要約`の順。

ボタン|処理
------|----
可能な限り自動修正する|自動修正案があるすべての項目に対して自動修正する
こうする|自動修正する
エラー要約|該当箇所に飛ぶ（テキストエリアの指定箇所にselectionStartをセットする）

　解消されたエラーは表示から消える。`こうする`ボタン押下で消えたら次の`こうする`にフォーカスする。すべて解消されたらHTMLプレビュー画面を表示する。

