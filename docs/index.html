<style>
body {
    font-size:max(16px, calc(100vw / 45));
    line-height:1.7em;
    letter-spacing:0.05em;
}
</style>
<!--<script type="text/javascript" src="https://cdn.jsdelivr.net/gh/vanjs-org/van/public/van-1.2.6.nomodule.min.js"></script>-->
<script type="text/javascript" src="lib/van/1.2.6/nomodule.min.js"></script>
<script>
window.addEventListener('DOMContentLoaded', async(event) => {
    const items = [
        '最小限（VanJS, Parse(h1,p), UI(Textarea, 書字方向ボタン, 縦ホイールで横スクロール)）',
        'font-family設定',
        'resize()対応',
        '画面分割を長辺側で行うよう対応',
        'タブキーでフォーカスが循環するよう対応',
        'リファクタリング（HtmlViewerを別ファイル化）',
        'リファクタリング（FocusLooper,AppStyleを別ファイル化）',
        'ruby,emタグ書式対応（超重い）',
        'パフォーマンス改善途中１（文字入力時そのブロックだけパースし直す（複数ブロックをまたぐペーストやカットはバグる））',
        'リファクタリング（TextBlock）',
        'パフォーマンス改善途中２（複数ブロックをまたぐカットに対応）',
        'パフォーマンス改善途中３（複数ブロックをまたぐカット＆ペーストに対応）',
        'リファクタリング（TextBlock .cutBlocks(), .pasteBlocks()。既存バグ：先頭と末尾に改行がひとつずつあるとき次のブロックが増殖してしまう）',
        'バグ改修（先頭と末尾に改行がひとつずつあるとき次のブロックが増殖してしまう）',
        'バグ改修（段落内改行を前後に含めてカットすると次のブロックが増殖してしまう）',
        'リファクタリング＆バグ改修（カット全面改修）',
        'リファクタリング＆バグ改修（ブロック改行のうちひとつをカットすると次ブロックが増殖してしまうのを改修。既存バグ：先頭２ブロック＋末尾改行ひとつカットのとき次ブロックが消えてしまう）',
        'リファクタリング＆バグ改修（カットするとき前後中に改行が一つまたは二つ含むときブロックが増減してしまう）',
        'リファクタリング＆バグ改修（カットするとき前後中に改行が一つまたは二つ含むときブロックが増減してしまう）',
        'バグ改修（カットするとき先頭２、末尾１つの改行があるときブロックが増殖してしまう）',
        'リファクタリング＆バグ改修（BkSp|Delキー押下時のブロック編集（途中）＆JavelParser.#inline()で最後のspan忘れ。既存バグ：textareaで範囲選択中にDelキー押下すると、inputイベントでは削除対象テキストが取得できない）',
        'リファクタリング＆バグ改修（テキスト範囲選択中BkSp/Del/Enterキー押下時ブロック削除処理実装）',
        'リファクタリング＆バグ改修（テキスト範囲選択中BkSp/Del/Enterキー押下時ブロック削除処理実装）',
        'バグ改修（テキスト範囲選択せずBkSp/Delキー押下時ブロック改行コード削除処理実装）',
        'バグ改修（テキスト範囲選択せず、Enterで改行追加し、その前後が改行であるなら、ブロック追加する）',
        'バグ改修（ブロック改行のうちひとつをテキスト範囲選択し、Enterで改行追加したとき、何もしない）',
        'バグ改修（ブロック改行の２改行をテキスト範囲選択し、Enterで改行追加したとき、ブロックカットする）',
        'バグ改修（改行ひとつある箇所の直後にENTERで改行追加したら、前後ブロック分断する）',
        'バグ改修（２つ以上の連続した改行は入力禁止。既存バグ：既存行の文字を改行だけ残すと３行以上連続した空行ができてしまう）',
        'バグ改修（Enterで改行追加され、その前後が改行であるなら、ブロック追加するとき、１文字ずれてしまうのを修正）',
        'バグ改修（Textarea内で３つ以上の連続改行の入力を許可しつつ、その時はブロック生成しないようにする（それをエラーメッセージで表示したいのだが未実装））',
        '仮実装（エラー表示画面）',
        '仮実装（エラー表示画面の詳細情報。エラー箇所遷移実装。行数値不正修正。一件自動修正実装。既知バグ：全件自動修正未実装）',
        /*
        'リファクタリング＆バグ改修（ペースト全面改修（バグ修正））',
        'リファクタリング＆バグ改修（範囲選択削除(delete,bksp)したときブロック削除する）',
        'バグ改修（ブロック間改行のうちひとつの改行をカットした時に適切なブロック削除処理をする）',
        'パフォーマンス改善途中Ｎ（範囲選択時delete,bksp,1字入力時に適切なブロック削除処理をする）',
        'パフォーマンス改善途中４（２行以上連続した改行を入力できないようにする）',
        'パフォーマンス改善途中５（複数ブロックをまたぐアンドゥに対応）',
        'パフォーマンス改善途中６（複数ブロックをまたぐリドゥに対応）',
        '',

        'フォントサイズ自動最適化（16px〜/字かつ20〜40字/行）',
        'エクスポート機能追加',
        'インポート機能追加(DnD)',

        'ダークモード切替',

        'スクロール量を一行サイズline-heightずつにする（見出しや行間はサイズが違うので誤差が出る）',
        'スクロール位置は完全表示されていない[前|後]要素の[末尾|先頭]にする（p要素が長いと一画面以上飛んでしまう）',
        */
    ]
    const { h1, p, ol, li, a } = van.tags
    van.add(document.body, 
        h1('Javel.Writer.Mini.VanJS'),
        p('テキストで縦書き小説を書くツールの仮作成。'),
        ol({start:0},
            //items.map((item, i)=>li(a({href:`app-${i}.html`}, item)))
            items.map((item, i)=>li(a({href:()=>(i<7) ? `app-${i}.html` : `${i}/app.html`}, item)))
        ),
    )
})
</script>
